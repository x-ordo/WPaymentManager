# COST_MODEL.md — 비용 모델 및 수익성 분석

**버전:** v1.0
**작성일:** 2025-11-19
**목적:** 사건당 원가(Unit Economics)를 산출하고, 마진을 확보하기 위한 비용 통제 정책을 정의함.

---

## 1. 기본 가정 (Assumptions)

* **평균 사건 규모:** 증거 파일 100개 (이미지 50, 녹취 10, 문서 40)
* **평균 텍스트 처리량:** 사건당 입력 토큰 100k + 출력 토큰 10k
* **데이터 보관 기간:** 사건당 평균 6개월 (이후 아카이빙)
* **환율:** $1 = 1,400원

---

## 2. Unit Economics (사건 1건당 예상 원가)

| 항목 | 상세 내역 (추정치) | 예상 비용 (USD) | 비고 |
|:---|:---|:---:|:---|
| **GPT-4o (Vision/Text)** | OCR, 요약, RAG, 초안 생성 | **$3.50** | 가장 큰 비용 요소 (전체의 70%) |
| **Whisper API** | 녹취록 전사 (약 60분 분량 가정) | $0.36 | $0.006 / min |
| **AWS S3** | 스토리지 (1GB, 6개월, 잦은 액세스) | $0.14 | 저장 비용은 미미함 |
| **OpenSearch** | 벡터 인덱싱 및 검색 (Managed) | $0.50 | 인스턴스 비용 / 예상 사건 수 (N빵) |
| **AWS Lambda/Network** | 컴퓨팅 및 데이터 전송료 | $0.50 | |
| **합계 (Total Unit Cost)** | | **$5.00** | **(약 7,000원)** |

> **💡 수익성 분석:**
> - 월 구독료 5만원 (약 $36) 가정 시
> - 사건 1건 처리 시 **마진율 약 86%** ($31 이익)
> - 단, AI 오남용(Abuse) 발생 시 원가가 급증할 수 있으므로 **Quota 제한 필수**.

---

## 3. 비용 통제 및 오남용 방지 (Abuse Prevention)

### A. Quota (할당량) 제한 정책
무제한 요금제가 아닌, 티어별 기술적 제한(Hard Limit)을 적용합니다.

| 구분 | Standard Plan | Pro Plan | 초과 시 대응 |
|:---|:---|:---|:---|
| **파일 수** | 300개 / 사건 | 1,000개 / 사건 | 추가 업로드 차단 |
| **오디오** | 120분 / 사건 | 300분 / 사건 | 요약만 제공 (전사 중단) |
| **질의 횟수** | 50회 / 일 | 200회 / 일 | 쿨타임 적용 |

### B. 기술적 최적화 (FinOps)
1. **모델 경량화:**
   - 단순 텍스트 요약은 `GPT-4o` 대신 `GPT-4o-mini` 사용 (비용 1/10 절감).
   - 최종 초안 생성만 고성능 모델 사용.
2. **이미지 리사이징:**
   - Vision API 전송 전, 텍스트 식별에 지장 없는 수준(예: FHD)으로 리사이징하여 토큰 절약.
3. **중복 방지 (Deduplication):**
   - 파일 해시(MD5/SHA)를 비교하여 이미 분석된 파일은 API 호출 건너뜀.

---

## 4. 모니터링 및 알림 (Alerting)

* **AWS Budgets:** 월 예산 $500 설정, 80% 도달 시 Slack 알림.
* **OpenAI Usage:** API Key 별 사용량 급증(Anomaly Detection) 시 관리자 호출.
* **Emergency Kill Switch:** 특정 사용자/사건의 비용이 $50/일 초과 시 해당 계정의 AI 기능 자동 정지.