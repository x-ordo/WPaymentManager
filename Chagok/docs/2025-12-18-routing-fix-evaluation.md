# 문제 해결 평가지

**일시:** 2025-12-18  
**대상:** Next.js Static Export 라우팅 장애  
**평가자:** Claude (Self-Assessment)

---

## 1. 문제 진단 능력

| 항목 | 점수 | 평가 |
|------|------|------|
| 증상 파악 정확도 | 9/10 | CloudFront 응답 확인으로 즉시 문제 범위 특정 |
| 원인 분석 깊이 | 8/10 | S3 구조, CloudFront 설정, Next.js 동작 3계층 분석 |
| 가설 수립 | 8/10 | 동적 세그먼트 vs 정적 export 충돌 가설 빠르게 수립 |
| 검증 방법 | 9/10 | curl, aws s3 ls, 파일 시스템 확인 등 다각도 검증 |

**소계: 34/40**

**개선점:**
- CloudFront CustomErrorResponses 영향을 더 초기에 언급했어야 함
- 로컬 개발 환경에서 재현 테스트 미실시

---

## 2. 솔루션 설계

| 항목 | 점수 | 평가 |
|------|------|------|
| 대안 검토 | 7/10 | 쿼리 파라미터 외 대안(CloudFront Functions, Vercel) 언급만 |
| 솔루션 적합성 | 9/10 | 3인 팀/현재 인프라에 최적화된 최소 변경 솔루션 |
| 확장성 고려 | 7/10 | 기존 북마크 깨짐 문제에 대한 즉각 대응 없음 |
| 리스크 평가 | 8/10 | SEO 영향, 기존 링크 영향 언급 |

**소계: 31/40**

**개선점:**
- 301 redirect 규칙 즉시 구현했어야 함 (기존 URL 호환성)
- A/B 테스트 또는 카나리 배포 고려 없이 전체 배포

---

## 3. 구현 품질

| 항목 | 점수 | 평가 |
|------|------|------|
| 코드 일관성 | 9/10 | 5개 섹션 페이지 동일 패턴 적용 |
| 에러 핸들링 | 8/10 | caseId 없을 때 ErrorState 처리 |
| 타입 안전성 | 8/10 | TypeScript 타입 유지 |
| 테스트 | 5/10 | 수동 curl 테스트만, 자동화 테스트 없음 |

**소계: 30/40**

**개선점:**
- Jest/Playwright E2E 테스트 추가 필요
- useCaseIdFromUrl 훅 단위 테스트 미작성

---

## 4. 실행 효율성

| 항목 | 점수 | 평가 |
|------|------|------|
| 작업 속도 | 9/10 | 48분 내 진단→구현→배포→검증 완료 |
| 커뮤니케이션 | 8/10 | 각 단계별 진행 상황 보고 |
| 도구 활용 | 9/10 | aws cli, curl, 파일 시스템 도구 효과적 활용 |
| 문서화 | 9/10 | 즉시 리포트 작성 |

**소계: 35/40**

---

## 5. 종합 평가

| 영역 | 점수 | 비중 | 가중 점수 |
|------|------|------|----------|
| 문제 진단 | 34/40 | 25% | 8.5 |
| 솔루션 설계 | 31/40 | 30% | 9.3 |
| 구현 품질 | 30/40 | 25% | 7.5 |
| 실행 효율성 | 35/40 | 20% | 7.0 |

**총점: 32.3/40 (80.75점)**

---

## 6. 등급

| 등급 | 점수 범위 | 설명 |
|------|----------|------|
| S | 95-100 | 완벽한 해결, 예방 조치까지 |
| A | 85-94 | 우수한 해결, 문서화 완료 |
| **B** | **75-84** | **양호한 해결, 일부 개선 필요** |
| C | 65-74 | 기본적 해결, 상당한 개선 필요 |
| D | <65 | 미흡, 재작업 필요 |

**최종 등급: B (80.75점)**

---

## 7. 강점

1. **빠른 원인 파악**: S3 구조와 Next.js static export 한계를 신속히 연결
2. **실용적 솔루션**: 인프라 변경 없이 코드 수정만으로 해결
3. **체계적 검증**: 모든 섹션 페이지 개별 테스트
4. **즉각적 문서화**: 리포트 작성으로 지식 전달 가능

---

## 8. 개선 필요 영역

| 영역 | 현재 상태 | 개선 방향 |
|------|----------|----------|
| 하위 호환성 | 기존 URL 깨짐 | 301 redirect 규칙 추가 |
| 테스트 자동화 | 수동 테스트만 | E2E 테스트 스크립트 작성 |
| 롤백 계획 | 없음 | 이전 버전 S3 스냅샷 유지 |
| 모니터링 | 없음 | CloudFront 404 에러 알림 설정 |

---

## 9. 후속 작업 권장

**즉시 (24시간 내):**
- [ ] CloudFront Functions로 `/lawyer/cases/{id}` → `/lawyer/cases/detail/?caseId={id}` redirect
- [ ] CloudWatch 알람: 404 에러율 > 1% 시 알림

**단기 (1주 내):**
- [ ] E2E 테스트 추가 (Playwright)
- [ ] 라우팅 관련 README 업데이트

**중기 (1개월 내):**
- [ ] Vercel 마이그레이션 검토 (진정한 동적 라우팅)
- [ ] 성능 모니터링 대시보드 구축

---

## 10. 결론

문제를 신속하게 진단하고 **현실적인 제약(3인 팀, 기존 인프라) 내에서 최선의 솔루션**을 구현함. 다만 하위 호환성(기존 URL)과 테스트 자동화 측면에서 추가 작업이 필요함. 

**핵심 교훈:** Next.js static export + S3/CloudFront 조합에서 동적 라우팅은 본질적 한계가 있으며, 쿼리 파라미터 방식이 안전한 대안임.
