# IDEAS_IMPLEMENTATION_PLAN.md

### *CHAGOK ì„œë¹„ìŠ¤ ì‹ ê·œ ê¸°ëŠ¥ êµ¬í˜„ ê³„íš*

**ë²„ì „:** v1.0
**ì‘ì„±ì¼:** 2025-12-03
**ì‘ì„±ì:** Team HÂ·PÂ·L
**ê´€ë ¨ ë¬¸ì„œ:** `IDEAS.md`, `ARCHITECTURE.md`, `AI_PIPELINE_DESIGN.md`

---

## ë³€ê²½ ì´ë ¥ (Change Log)

| ë²„ì „ | ë‚ ì§œ | ì‘ì„±ì | ë³€ê²½ ë‚´ìš© |
|------|------|--------|----------|
| v1.0 | 2025-12-03 | L-work | ìµœì´ˆ ì‘ì„± |

---

## ğŸ”§ í•µì‹¬ ê¸°ìˆ  ì›ì¹™: ë¼ì´ë¸ŒëŸ¬ë¦¬ ê¸°ë°˜ êµ¬í˜„

> **"LLM ìµœì†Œí™”, ë¼ì´ë¸ŒëŸ¬ë¦¬ ìµœëŒ€ í™œìš©"**

### LLM vs ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¹„êµ

| ë°©ì‹ | ë¹„ìš© | ì†ë„ | ì¼ê´€ì„± |
|------|------|------|--------|
| LLM (GPT) ì˜ì¡´ | ğŸ’° ë†’ìŒ | â±ï¸ ëŠë¦¼ | ğŸ² ë¶ˆì•ˆì • |
| ë¼ì´ë¸ŒëŸ¬ë¦¬ ê¸°ë°˜ | âœ… ë¬´ë£Œ/ì €ë ´ | âœ… ë¹ ë¦„ | âœ… ì¼ê´€ë¨ |

### ì „ì²´ ì•„í‚¤í…ì²˜

```
                      [ì¦ê±° ì—…ë¡œë“œ]
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚               â”‚               â”‚
           â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ë‚ ì§œ ì¶”ì¶œ  â”‚  â”‚ ì¸ë¬¼ ì¶”ì¶œ  â”‚  â”‚ ìœ ì±…ì‚¬ìœ    â”‚
    â”‚            â”‚  â”‚            â”‚  â”‚ ë¶„ë¥˜       â”‚
    â”‚ âœ… Regex   â”‚  â”‚ âœ… KoNLPy  â”‚  â”‚ âš ï¸ GPT    â”‚  â† ì—¬ê¸°ë§Œ
    â”‚ âœ… dateparserâ”‚ â”‚ âœ… Pororo  â”‚  â”‚ (ê¸°ì¡´ìœ ì§€) â”‚    LLM ì‚¬ìš©
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚               â”‚               â”‚
          â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ íƒ€ì„ë¼ì¸   â”‚  â”‚ ì¸ë¬¼ê´€ê³„   â”‚  â”‚ ì¬ì‚°ë¶„í•    â”‚
    â”‚ íŠ¸ë¦¬ ìƒì„±  â”‚  â”‚ ê·¸ë˜í”„     â”‚  â”‚ ì˜í–¥ë„     â”‚
    â”‚            â”‚  â”‚            â”‚  â”‚            â”‚
    â”‚ âœ… Python  â”‚  â”‚ âœ… NetworkXâ”‚  â”‚ âœ… ê·œì¹™    â”‚
    â”‚    ë¡œì§    â”‚  â”‚            â”‚  â”‚    í…Œì´ë¸”  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚               â”‚               â”‚
          â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ React Flow â”‚  â”‚ vis.js     â”‚  â”‚ Chart.js   â”‚
    â”‚ ë§ˆì¸ë“œë§µ   â”‚  â”‚ ë„¤íŠ¸ì›Œí¬   â”‚  â”‚ ê²Œì´ì§€     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  âœ… = ë¼ì´ë¸ŒëŸ¬ë¦¬ (ë¬´ë£Œ, ë¹ ë¦„)
  âš ï¸ = LLM (ë¹„ìš©, ëŠë¦¼) - ìµœì†Œí™”
```

### ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª©ë¡

| ê¸°ëŠ¥ | Python | JavaScript | LLM |
|------|--------|------------|-----|
| ë‚ ì§œ ì¶”ì¶œ | `dateparser`, `re` | - | âŒ |
| ì¸ë¬¼ ì¶”ì¶œ (NER) | `pororo`, `KoNLPy` | - | âŒ |
| ê´€ê³„ ì¶”ë¡  | ê·œì¹™ ê¸°ë°˜ (í‚¤ì›Œë“œ) | - | âŒ |
| ê·¸ë˜í”„ êµ¬ì¡° | `NetworkX` | - | âŒ |
| ì˜í–¥ë„ ê³„ì‚° | ê·œì¹™ í…Œì´ë¸” | - | âŒ |
| ìœ ì‚¬ íŒë¡€ ê²€ìƒ‰ | `qdrant-client` | - | âŒ |
| íƒ€ì„ë¼ì¸ ì‹œê°í™” | - | `React Flow` | âŒ |
| ê´€ê³„ ê·¸ë˜í”„ | - | `vis.js` | âŒ |
| ê²Œì´ì§€/ì°¨íŠ¸ | - | `Chart.js`, `Framer Motion` | âŒ |

---

## ğŸ“‹ êµ¬í˜„ ë¡œë“œë§µ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        êµ¬í˜„ ë¡œë“œë§µ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Phase 1: ì¬ì‚°ë¶„í•  ì‹¤ì‹œê°„ ì‹œê°í™” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”œâ”€ 1.1 ë°ì´í„° ëª¨ë¸ ì„¤ê³„ (H)                                    â”‚
â”‚  â”œâ”€ 1.2 ì˜í–¥ë„ ë¶„ì„ ëª¨ë¸ (L)                                    â”‚
â”‚  â”œâ”€ 1.3 API ê°œë°œ (H)                                           â”‚
â”‚  â””â”€ 1.4 Dashboard UI (P)                                       â”‚
â”‚           â”‚                                                     â”‚
â”‚           â–¼                                                     â”‚
â”‚  Phase 2: íƒ€ì„ë¼ì¸ ë§ˆì¸ë“œë§µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”œâ”€ 2.1 íƒ€ì„ë¼ì¸ ë°ì´í„° êµ¬ì¡° (H)                                â”‚
â”‚  â”œâ”€ 2.2 ì´ë²¤íŠ¸ ë¶„ë¥˜ ë¡œì§ (L)                                    â”‚
â”‚  â””â”€ 2.3 ë§ˆì¸ë“œë§µ UI (P)                                        â”‚
â”‚           â”‚                                                     â”‚
â”‚           â–¼                                                     â”‚
â”‚  Phase 3: ì¸ë¬¼ê´€ê³„ ê·¸ë˜í”„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”œâ”€ 3.1 ì¸ë¬¼ ë°ì´í„° ëª¨ë¸ (H)                                    â”‚
â”‚  â”œâ”€ 3.2 NER ë° ê´€ê³„ ì¶”ë¡  (L)                                   â”‚
â”‚  â””â”€ 3.3 ê·¸ë˜í”„ UI (P)                                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Phase 1: ì¬ì‚°ë¶„í•  ì‹¤ì‹œê°„ ì‹œê°í™”

> **ëª©í‘œ:** ì¦ê±° ì—…ë¡œë“œ ì‹œ ì¬ì‚°ë¶„í•  ì˜ˆì¸¡ ë¹„ìœ¨ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€í™”í•˜ëŠ” Dashboard ì œê³µ

### 1.1 ì™„ë£Œ ê¸°ì¤€ (Definition of Done)

- [ ] ì¬ì‚° ì •ë³´ ì…ë ¥ UIì—ì„œ ì´ ì¬ì‚°ì•¡ ì…ë ¥ ê°€ëŠ¥
- [ ] ì¦ê±° ì—…ë¡œë“œ ì‹œ ì˜í–¥ë„ ë¶„ì„ ìë™ ì‹¤í–‰
- [ ] ì¬ì‚°ë¶„í•  ë¹„ìœ¨ ê²Œì´ì§€ê°€ ì‹¤ì‹œê°„ ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ë³€í™”
- [ ] ê° ì¦ê±°ë³„ ì˜í–¥ë„(Â±%p) ëª©ë¡ í‘œì‹œ
- [ ] ìœ ì‚¬ íŒë¡€ ì°¸ê³  ì •ë³´ í‘œì‹œ
- [ ] "ì˜ˆì¸¡" ë©´ì±… ë¬¸êµ¬ í‘œì‹œ

---

### 1.2 ë°ì´í„° ëª¨ë¸ ì„¤ê³„

#### 1.2.1 ì¬ì‚° ì •ë³´ ìŠ¤í‚¤ë§ˆ (PostgreSQL)

```sql
-- ì‚¬ê±´ë³„ ì¬ì‚° ì •ë³´ í…Œì´ë¸”
CREATE TABLE case_properties (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    case_id UUID NOT NULL REFERENCES cases(id),

    -- ì¬ì‚° í•­ëª©
    property_type VARCHAR(50) NOT NULL,  -- 'real_estate', 'savings', 'stocks', 'retirement', 'vehicle', 'other'
    description TEXT,
    estimated_value BIGINT NOT NULL,      -- ì› ë‹¨ìœ„
    owner VARCHAR(20),                    -- 'plaintiff', 'defendant', 'joint'
    is_premarital BOOLEAN DEFAULT FALSE,  -- í˜¼ì „ ì¬ì‚° ì—¬ë¶€

    -- ë©”íƒ€
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_case_properties_case_id ON case_properties(case_id);
```

#### 1.2.2 ì¬ì‚°ë¶„í•  ì˜ˆì¸¡ ê²°ê³¼ ìŠ¤í‚¤ë§ˆ (DynamoDB)

```json
{
    "case_id": "uuid",
    "prediction_id": "uuid",
    "timestamp": "2025-12-03T10:00:00Z",

    "total_property_value": 520000000,

    "division_ratio": {
        "plaintiff": 58,
        "defendant": 42
    },

    "plaintiff_amount": 301600000,
    "defendant_amount": 218400000,

    "evidence_impacts": [
        {
            "evidence_id": "uuid-1",
            "evidence_type": "chat_log",
            "impact_type": "adultery",
            "impact_percent": 5,
            "direction": "plaintiff_favor",
            "reason": "ì™¸ë„ ì¦ê±°ë¡œ ìœ ì±…ë°°ìš°ì íŒì • ê°€ëŠ¥ì„±"
        },
        {
            "evidence_id": "uuid-2",
            "evidence_type": "photo",
            "impact_type": "violence",
            "impact_percent": 3,
            "direction": "plaintiff_favor",
            "reason": "í­í–‰ í”ì  ì¦ê±°"
        }
    ],

    "similar_cases": [
        {
            "case_ref": "ì„œìš¸ê°€ì •ë²•ì› 2023ë“œí•©1234",
            "similarity_score": 0.85,
            "division_ratio": "60:40",
            "key_factors": ["ì™¸ë„", "í­í–‰"]
        }
    ],

    "confidence_level": "medium",
    "disclaimer": "ë³¸ ì˜ˆì¸¡ì€ ì°¸ê³ ìš©ì´ë©° ì‹¤ì œ íŒê²°ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
}
```

#### ë‹´ë‹¹ ë° ì‘ì—…

| ë‹´ë‹¹ | ì‘ì—… | ìƒì„¸ |
|------|------|------|
| **Backend (H)** | DB ë§ˆì´ê·¸ë ˆì´ì…˜ | case_properties í…Œì´ë¸” ìƒì„± |
| **Backend (H)** | CRUD API | ì¬ì‚° ì •ë³´ ì…ë ¥/ìˆ˜ì •/ì‚­ì œ |
| **Backend (H)** | DynamoDB ìŠ¤í‚¤ë§ˆ | ì˜ˆì¸¡ ê²°ê³¼ ì €ì¥ êµ¬ì¡° |

---

### 1.3 ì˜í–¥ë„ ë¶„ì„ ëª¨ë¸ (AI Worker)

#### 1.3.1 ë¶„ì„ íŒŒì´í”„ë¼ì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ì˜í–¥ë„ ë¶„ì„ íŒŒì´í”„ë¼ì¸                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  [ì¦ê±° ì—…ë¡œë“œ]                                               â”‚
â”‚       â”‚                                                     â”‚
â”‚       â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚ ê¸°ì¡´ íŒŒì‹±   â”‚  â† í˜„ì¬ êµ¬í˜„ëœ ì¦ê±° ë¶„ì„                    â”‚
â”‚  â”‚ íŒŒì´í”„ë¼ì¸  â”‚    (ìœ ì±…ì‚¬ìœ , íƒ€ì„ìŠ¤íƒ¬í”„ ë“±)                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚         â”‚                                                   â”‚
â”‚         â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ ì˜í–¥ë„ ë¶„ì„ê¸°   â”‚  â† ì‹ ê·œ êµ¬í˜„                           â”‚
â”‚  â”‚ (ImpactAnalyzer)â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚         â”‚                                                   â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚         â”‚                                     â”‚             â”‚
â”‚         â–¼                                     â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ê·œì¹™ ê¸°ë°˜   â”‚                    â”‚ íŒë¡€ ê¸°ë°˜      â”‚     â”‚
â”‚  â”‚ ì˜í–¥ë„ ê³„ì‚° â”‚                    â”‚ ìœ ì‚¬ë„ ê²€ìƒ‰    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                                    â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                 â”‚ ìµœì¢… ë¹„ìœ¨ ê³„ì‚°  â”‚                         â”‚
â”‚                 â”‚ (ê°€ì¤‘ í‰ê· )     â”‚                         â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚                 [DynamoDB ì €ì¥ + ì‹¤ì‹œê°„ ì•Œë¦¼]               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.3.2 ê·œì¹™ ê¸°ë°˜ ì˜í–¥ë„ í…Œì´ë¸”

```python
# ai_worker/src/analysis/impact_rules.py

IMPACT_RULES = {
    # ìœ ì±…ì‚¬ìœ ë³„ ì˜í–¥ë„ (ê¸°ë³¸ê°’, ì‹¤ì œëŠ” íŒë¡€ í•™ìŠµìœ¼ë¡œ ë³´ì •)
    "adultery": {
        "base_impact": 5,      # ê¸°ë³¸ Â±5%p
        "max_impact": 10,      # ìµœëŒ€ Â±10%p
        "evidence_weight": {
            "photo": 1.5,       # ì‚¬ì§„ ì¦ê±° ê°€ì¤‘ì¹˜
            "chat_log": 1.2,    # ì¹´í†¡ ì¦ê±° ê°€ì¤‘ì¹˜
            "recording": 1.3,   # ë…¹ìŒ ì¦ê±° ê°€ì¤‘ì¹˜
            "witness": 1.0,     # ì§„ìˆ ì„œ ê°€ì¤‘ì¹˜
        }
    },
    "violence": {
        "base_impact": 3,
        "max_impact": 8,
        "evidence_weight": {
            "photo": 1.5,
            "medical_record": 2.0,
            "recording": 1.3,
            "police_report": 2.0,
        }
    },
    "verbal_abuse": {
        "base_impact": 2,
        "max_impact": 5,
        "evidence_weight": {
            "chat_log": 1.2,
            "recording": 1.5,
        }
    },
    "economic_abuse": {
        "base_impact": 3,
        "max_impact": 7,
        "evidence_weight": {
            "bank_statement": 1.5,
            "chat_log": 1.0,
        }
    },
    "desertion": {
        "base_impact": 4,
        "max_impact": 8,
        "evidence_weight": {
            "document": 1.2,
            "chat_log": 1.0,
        }
    },
}

# ê²½ì œì  ê¸°ì—¬ë„ (ë³„ë„ ê³„ì‚°)
CONTRIBUTION_FACTORS = {
    "income_ratio": 0.3,        # ì†Œë“ ë¹„ìœ¨ ë°˜ì˜ë„
    "childcare": 0.25,          # ì–‘ìœ¡ ê¸°ì—¬
    "housework": 0.2,           # ê°€ì‚¬ ê¸°ì—¬
    "asset_formation": 0.25,    # ì¬ì‚° í˜•ì„± ê¸°ì—¬
}
```

#### 1.3.3 ImpactAnalyzer í´ë˜ìŠ¤ ì„¤ê³„

```python
# ai_worker/src/analysis/impact_analyzer.py

from dataclasses import dataclass
from typing import List, Optional
from enum import Enum

class ImpactDirection(Enum):
    PLAINTIFF_FAVOR = "plaintiff_favor"
    DEFENDANT_FAVOR = "defendant_favor"
    NEUTRAL = "neutral"

@dataclass
class EvidenceImpact:
    evidence_id: str
    evidence_type: str
    impact_type: str           # 'adultery', 'violence', etc.
    impact_percent: float      # ì˜í–¥ë„ (%)
    direction: ImpactDirection
    reason: str
    confidence: float          # ì‹ ë¢°ë„ (0~1)

@dataclass
class DivisionPrediction:
    plaintiff_ratio: float     # ì›ê³  ë¹„ìœ¨ (%)
    defendant_ratio: float     # í”¼ê³  ë¹„ìœ¨ (%)
    evidence_impacts: List[EvidenceImpact]
    similar_cases: List[dict]
    confidence_level: str      # 'high', 'medium', 'low'

class ImpactAnalyzer:
    """ì¦ê±° ê¸°ë°˜ ì¬ì‚°ë¶„í•  ì˜í–¥ë„ ë¶„ì„ê¸°"""

    def __init__(self, qdrant_client, case_id: str):
        self.qdrant = qdrant_client
        self.case_id = case_id
        self.base_ratio = 50.0  # ê¸°ë³¸ 50:50

    async def analyze_evidence(self, evidence: dict) -> EvidenceImpact:
        """ë‹¨ì¼ ì¦ê±°ì˜ ì˜í–¥ë„ ë¶„ì„"""
        pass

    async def calculate_total_impact(self) -> DivisionPrediction:
        """ì „ì²´ ì¦ê±° ê¸°ë°˜ ìµœì¢… ë¹„ìœ¨ ê³„ì‚°"""
        pass

    async def find_similar_cases(self) -> List[dict]:
        """ìœ ì‚¬ íŒë¡€ ê²€ìƒ‰"""
        pass

    def _apply_rules(self, evidence_type: str, fault_type: str) -> float:
        """ê·œì¹™ ê¸°ë°˜ ì˜í–¥ë„ ê³„ì‚°"""
        pass

    def _adjust_by_precedent(self, base_impact: float, similar_cases: List) -> float:
        """íŒë¡€ ê¸°ë°˜ ì˜í–¥ë„ ë³´ì •"""
        pass
```

#### ë‹´ë‹¹ ë° ì‘ì—…

| ë‹´ë‹¹ | ì‘ì—… | ìƒì„¸ | íŒŒì¼ |
|------|------|------|------|
| **AI Worker (L)** | ê·œì¹™ í…Œì´ë¸” ì •ì˜ | ìœ ì±…ì‚¬ìœ ë³„ ì˜í–¥ë„ ê¸°ì¤€ | `impact_rules.py` |
| **AI Worker (L)** | ImpactAnalyzer êµ¬í˜„ | ì˜í–¥ë„ ë¶„ì„ í´ë˜ìŠ¤ | `impact_analyzer.py` |
| **AI Worker (L)** | íŒë¡€ ê²€ìƒ‰ ì—°ë™ | Qdrant ìœ ì‚¬ íŒë¡€ ê²€ìƒ‰ | `impact_analyzer.py` |
| **AI Worker (L)** | íŒŒì´í”„ë¼ì¸ í†µí•© | ê¸°ì¡´ íŒŒì‹± í›„ ì˜í–¥ë„ ë¶„ì„ ì—°ê²° | `pipeline.py` |

---

### 1.4 API ì„¤ê³„

#### 1.4.1 ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡

| Method | Endpoint | ì„¤ëª… | ë‹´ë‹¹ |
|--------|----------|------|------|
| `POST` | `/cases/{id}/properties` | ì¬ì‚° í•­ëª© ì¶”ê°€ | H |
| `GET` | `/cases/{id}/properties` | ì¬ì‚° ëª©ë¡ ì¡°íšŒ | H |
| `PUT` | `/cases/{id}/properties/{prop_id}` | ì¬ì‚° í•­ëª© ìˆ˜ì • | H |
| `DELETE` | `/cases/{id}/properties/{prop_id}` | ì¬ì‚° í•­ëª© ì‚­ì œ | H |
| `GET` | `/cases/{id}/division-prediction` | ì¬ì‚°ë¶„í•  ì˜ˆì¸¡ ì¡°íšŒ | H |
| `GET` | `/cases/{id}/division-prediction/stream` | ì‹¤ì‹œê°„ ì˜ˆì¸¡ (SSE) | H |

#### 1.4.2 API ëª…ì„¸ ìƒì„¸

```yaml
# POST /cases/{id}/properties
Request:
  body:
    property_type: "real_estate"    # required
    description: "ì„œìš¸ ê°•ë‚¨ ì•„íŒŒíŠ¸"
    estimated_value: 800000000      # required (ì›)
    owner: "joint"                  # 'plaintiff', 'defendant', 'joint'
    is_premarital: false

Response:
  201:
    id: "uuid"
    case_id: "uuid"
    property_type: "real_estate"
    ...

---

# GET /cases/{id}/division-prediction
Response:
  200:
    case_id: "uuid"
    total_property_value: 520000000
    division_ratio:
      plaintiff: 58
      defendant: 42
    plaintiff_amount: 301600000
    defendant_amount: 218400000
    evidence_impacts:
      - evidence_id: "uuid"
        impact_percent: 5
        direction: "plaintiff_favor"
        reason: "ì™¸ë„ ì¦ê±°"
    similar_cases:
      - case_ref: "ì„œìš¸ê°€ì •ë²•ì› 2023ë“œí•©1234"
        similarity_score: 0.85
        division_ratio: "60:40"
    confidence_level: "medium"
    disclaimer: "ë³¸ ì˜ˆì¸¡ì€ ì°¸ê³ ìš©ì…ë‹ˆë‹¤..."

---

# GET /cases/{id}/division-prediction/stream (SSE)
Event Stream:
  event: prediction_update
  data: {
    "plaintiff_ratio": 58,
    "defendant_ratio": 42,
    "last_evidence_impact": {...},
    "timestamp": "2025-12-03T10:00:00Z"
  }
```

#### ë‹´ë‹¹ ë° ì‘ì—…

| ë‹´ë‹¹ | ì‘ì—… | ìƒì„¸ |
|------|------|------|
| **Backend (H)** | ì¬ì‚° CRUD API | ì¬ì‚° ì •ë³´ ê´€ë¦¬ |
| **Backend (H)** | ì˜ˆì¸¡ ì¡°íšŒ API | DynamoDBì—ì„œ ì˜ˆì¸¡ ê²°ê³¼ ì¡°íšŒ |
| **Backend (H)** | SSE ì—”ë“œí¬ì¸íŠ¸ | ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ |

---

### 1.5 Frontend UI ì„¤ê³„

#### 1.5.1 ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ PropertyDivision/
â”‚       â”œâ”€â”€ PropertyDivisionDashboard.tsx   # ë©”ì¸ ì»¨í…Œì´ë„ˆ
â”‚       â”œâ”€â”€ DivisionGauge.tsx               # ë¹„ìœ¨ ê²Œì´ì§€ (ì• ë‹ˆë©”ì´ì…˜)
â”‚       â”œâ”€â”€ PropertyInputForm.tsx           # ì¬ì‚° ì…ë ¥ í¼
â”‚       â”œâ”€â”€ PropertyList.tsx                # ì¬ì‚° ëª©ë¡
â”‚       â”œâ”€â”€ EvidenceImpactList.tsx          # ì¦ê±°ë³„ ì˜í–¥ë„ ëª©ë¡
â”‚       â”œâ”€â”€ SimilarCasesList.tsx            # ìœ ì‚¬ íŒë¡€ ëª©ë¡
â”‚       â””â”€â”€ DisclaimerBanner.tsx            # ë©´ì±… ë¬¸êµ¬
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ usePropertyDivision.ts              # ìƒíƒœ ê´€ë¦¬ í›…
â”‚   â””â”€â”€ useDivisionStream.ts                # SSE ì—°ê²° í›…
â””â”€â”€ types/
    â””â”€â”€ propertyDivision.ts                 # íƒ€ì… ì •ì˜
```

#### 1.5.2 DivisionGauge ì»´í¬ë„ŒíŠ¸ ëª…ì„¸

```typescript
// DivisionGauge.tsx

interface DivisionGaugeProps {
  plaintiffRatio: number;      // 0-100
  defendantRatio: number;      // 0-100
  plaintiffAmount: number;     // ì›
  defendantAmount: number;     // ì›
  previousRatio?: {            // ì´ì „ ê°’ (ì• ë‹ˆë©”ì´ì…˜ìš©)
    plaintiff: number;
    defendant: number;
  };
  isAnimating?: boolean;
}

// ê¸°ëŠ¥:
// - ê°€ë¡œ ë§‰ëŒ€ ê·¸ë˜í”„ (ì¢Œ: í”¼ê³ , ìš°: ì›ê³ )
// - ë¹„ìœ¨ ë³€ê²½ ì‹œ 0.5ì´ˆ ì• ë‹ˆë©”ì´ì…˜
// - ì¦ê°€: ì´ˆë¡ìƒ‰ í•˜ì´ë¼ì´íŠ¸, ê°ì†Œ: ë¹¨ê°„ìƒ‰ í•˜ì´ë¼ì´íŠ¸
// - ê¸ˆì•¡ í‘œì‹œ (ì–µ/ë§Œì› ë‹¨ìœ„ ìë™ ë³€í™˜)
```

#### 1.5.3 í™”ë©´ ì™€ì´ì–´í”„ë ˆì„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ì‚¬ê±´ëª…] ì¬ì‚°ë¶„í•  ì˜ˆì¸¡                              [?] ë„ì›€ë§   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì¬ì‚° í˜„í™© â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ì´ ì¬ì‚°: 5ì–µ 2,000ë§Œì›                [+ ì¶”ê°€]  â”‚            â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚            â”‚
â”‚  â”‚ â”‚ ğŸ  ë¶€ë™ì‚°  â”‚ ê°•ë‚¨ ì•„íŒŒíŠ¸    â”‚ 8ì–µ    â”‚ âœï¸ ğŸ—‘ï¸â”‚   â”‚            â”‚
â”‚  â”‚ â”‚ ğŸ’° ì˜ˆê¸ˆ   â”‚ êµ­ë¯¼ì€í–‰      â”‚ 5ì²œë§Œ  â”‚ âœï¸ ğŸ—‘ï¸â”‚   â”‚            â”‚
â”‚  â”‚ â”‚ ğŸ“ˆ ì£¼ì‹   â”‚ ì‚¼ì„±ì „ì ì™¸   â”‚ 3ì²œë§Œ  â”‚ âœï¸ ğŸ—‘ï¸â”‚   â”‚            â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë¶„í•  ì˜ˆì¸¡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚                                                 â”‚            â”‚
â”‚  â”‚     ìƒëŒ€ë°© 42%              ì˜ë¢°ì¸ 58%          â”‚            â”‚
â”‚  â”‚     2ì–µ 1,840ë§Œì›           3ì–µ 160ë§Œì›         â”‚            â”‚
â”‚  â”‚                                                 â”‚            â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ—â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆ  â”‚            â”‚
â”‚  â”‚           â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶               â”‚            â”‚
â”‚  â”‚                                                 â”‚            â”‚
â”‚  â”‚  âš ï¸ ë³¸ ì˜ˆì¸¡ì€ ì°¸ê³ ìš©ì´ë©° ì‹¤ì œ íŒê²°ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì¦ê±°ë³„ ì˜í–¥ë„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚                                                 â”‚            â”‚
â”‚  â”‚  ğŸ“„ ì¹´ì¹´ì˜¤í†¡ (ì™¸ë„)              +5%p  â–² ìœ ë¦¬   â”‚            â”‚
â”‚  â”‚  ğŸ“· ì‚¬ì§„ (í­í–‰)                  +3%p  â–² ìœ ë¦¬   â”‚            â”‚
â”‚  â”‚  ğŸ“„ í†µì¥ê±°ë˜ë‚´ì—­                 +2%p  â–² ìœ ë¦¬   â”‚            â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚            â”‚
â”‚  â”‚  ê¸°ë³¸(50%) + ì˜í–¥ë„(+8%p) = 58%                 â”‚            â”‚
â”‚  â”‚                                                 â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ìœ ì‚¬ íŒë¡€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚                                                 â”‚            â”‚
â”‚  â”‚  ğŸ“š ì„œìš¸ê°€ì •ë²•ì› 2023ë“œí•©1234                   â”‚            â”‚
â”‚  â”‚     ìœ ì‚¬ë„ 85% â”‚ ë¶„í•  60:40 â”‚ ì™¸ë„, í­í–‰       â”‚            â”‚
â”‚  â”‚                                                 â”‚            â”‚
â”‚  â”‚  ğŸ“š ìˆ˜ì›ê°€ì •ë²•ì› 2022ë“œí•©5678                   â”‚            â”‚
â”‚  â”‚     ìœ ì‚¬ë„ 72% â”‚ ë¶„í•  55:45 â”‚ í­í–‰             â”‚            â”‚
â”‚  â”‚                                                 â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ë‹´ë‹¹ ë° ì‘ì—…

| ë‹´ë‹¹ | ì‘ì—… | ìƒì„¸ |
|------|------|------|
| **Frontend (P)** | DivisionGauge | ì• ë‹ˆë©”ì´ì…˜ ê²Œì´ì§€ ì»´í¬ë„ŒíŠ¸ |
| **Frontend (P)** | PropertyInputForm | ì¬ì‚° ì…ë ¥ í¼ |
| **Frontend (P)** | EvidenceImpactList | ì¦ê±° ì˜í–¥ë„ ëª©ë¡ |
| **Frontend (P)** | SSE ì—°ë™ | ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ |
| **Frontend (P)** | ë°˜ì‘í˜• ë””ìì¸ | ëª¨ë°”ì¼ ëŒ€ì‘ |

---

### 1.6 ì˜ì¡´ì„± ë° ì„ í–‰ ì‘ì—…

```
[ì„ í–‰ ì‘ì—…]
    â”‚
    â”œâ”€â”€ íŒë¡€ ë°ì´í„° ìˆ˜ì§‘ (íŒ€ ê³µí†µ)
    â”‚   â””â”€â”€ ìµœì†Œ 100ê±´ ì´ìƒ ì¬ì‚°ë¶„í•  íŒë¡€
    â”‚
    â”œâ”€â”€ ê¸°ì¡´ ì¦ê±° ë¶„ì„ íŒŒì´í”„ë¼ì¸ ì•ˆì •í™” (L)
    â”‚   â””â”€â”€ ìœ ì±…ì‚¬ìœ  ë¼ë²¨ë§ ì •í™•ë„ í™•ë³´
    â”‚
    â””â”€â”€ ì‚¬ê±´ ì¬ì‚° ì •ë³´ ì…ë ¥ ê¸°ëŠ¥ (H, P)
        â””â”€â”€ case_properties í…Œì´ë¸” ë° UI

[ë³‘ë ¬ ì§„í–‰ ê°€ëŠ¥]
    â”‚
    â”œâ”€â”€ ì˜í–¥ë„ ë¶„ì„ ëª¨ë¸ ê°œë°œ (L)
    â”‚
    â””â”€â”€ í”„ë¡ íŠ¸ì—”ë“œ UI ê°œë°œ (P)
        â””â”€â”€ ë”ë¯¸ ë°ì´í„°ë¡œ UI ë¨¼ì € ê°œë°œ ê°€ëŠ¥
```

---

### 1.7 í…ŒìŠ¤íŠ¸ ê³„íš

| í…ŒìŠ¤íŠ¸ ìœ í˜• | ë‚´ìš© | ë‹´ë‹¹ |
|-------------|------|------|
| ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ | ImpactAnalyzer ê° ë©”ì„œë“œ | L |
| ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ | API ì—”ë“œí¬ì¸íŠ¸ | H |
| í†µí•© í…ŒìŠ¤íŠ¸ | ì¦ê±° ì—…ë¡œë“œ â†’ ë¶„ì„ â†’ ì˜ˆì¸¡ ê°±ì‹  E2E | ì „ì²´ |
| UI í…ŒìŠ¤íŠ¸ | ê²Œì´ì§€ ì• ë‹ˆë©”ì´ì…˜, ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ | P |

---

## ğŸ—ºï¸ Phase 2: íƒ€ì„ë¼ì¸ ë§ˆì¸ë“œë§µ

> **ëª©í‘œ:** ì¦ê±°/ì´ë²¤íŠ¸ë¥¼ ë‚ ì§œë³„ íŠ¸ë¦¬ êµ¬ì¡°ë¡œ ì‹œê°í™”í•˜ì—¬ ì‚¬ê±´ íë¦„ì„ í•œëˆˆì— íŒŒì•…

### 2.1 ì™„ë£Œ ê¸°ì¤€ (Definition of Done)

- [ ] ì¦ê±°ì—ì„œ ë‚ ì§œ/ì‹œê°„ ìë™ ì¶”ì¶œ
- [ ] ë‚ ì§œë³„ ë¶„ê¸° íŠ¸ë¦¬ êµ¬ì¡° ìƒì„±
- [ ] ìœ ì±…ì‚¬ìœ ë³„ ìƒ‰ìƒ êµ¬ë¶„
- [ ] ë…¸ë“œ í´ë¦­ ì‹œ í•´ë‹¹ ì¦ê±°ë¡œ ì´ë™
- [ ] ì¤Œ/íŒ¬ ì¸í„°ë™ì…˜

---

### 2.2 ë°ì´í„° êµ¬ì¡°

#### 2.2.1 íƒ€ì„ë¼ì¸ ë…¸ë“œ ìŠ¤í‚¤ë§ˆ

```typescript
interface TimelineNode {
  id: string;
  date: string;                    // "2024-03-15"
  type: "month" | "event";
  label: string;
  children?: TimelineNode[];

  // event íƒ€ì…ì¸ ê²½ìš°
  evidence_id?: string;
  fault_type?: string;             // 'adultery', 'violence', etc.
  summary?: string;
}

interface TimelineTree {
  case_id: string;
  root: TimelineNode;
  date_range: {
    start: string;
    end: string;
  };
}
```

#### 2.2.2 API ì‘ë‹µ ì˜ˆì‹œ

```json
{
  "case_id": "uuid",
  "root": {
    "id": "root",
    "type": "month",
    "label": "ì‚¬ê±´ íƒ€ì„ë¼ì¸",
    "children": [
      {
        "id": "2024-01",
        "date": "2024-01",
        "type": "month",
        "label": "2024ë…„ 1ì›”",
        "children": [
          {
            "id": "ev-1",
            "date": "2024-01-15",
            "type": "event",
            "label": "í­ì–¸ (ì¹´ì¹´ì˜¤í†¡)",
            "evidence_id": "uuid-1",
            "fault_type": "verbal_abuse",
            "summary": "í”¼ê³ ê°€ ì›ê³ ì—ê²Œ í­ì–¸..."
          }
        ]
      },
      {
        "id": "2024-03",
        "date": "2024-03",
        "type": "month",
        "label": "2024ë…„ 3ì›”",
        "children": [
          {
            "id": "ev-2",
            "date": "2024-03-20",
            "type": "event",
            "label": "ì™¸ë„ ë°œê²¬ (ì‚¬ì§„)",
            "evidence_id": "uuid-2",
            "fault_type": "adultery"
          }
        ]
      }
    ]
  }
}
```

---

### 2.3 ë‹´ë‹¹ë³„ ì‘ì—…

| ë‹´ë‹¹ | ì‘ì—… | ìƒì„¸ | ë‚œì´ë„ |
|------|------|------|--------|
| **AI Worker (L)** | ë‚ ì§œ ì¶”ì¶œ ê°•í™” | ë‹¤ì–‘í•œ ë‚ ì§œ í¬ë§· íŒŒì‹± | ğŸŸ¢ (ê¸°ì¡´ ê°œì„ ) |
| **AI Worker (L)** | ì´ë²¤íŠ¸ ìš”ì•½ ìƒì„± | ì¦ê±°ë³„ í•œ ì¤„ ìš”ì•½ | ğŸŸ¡ ì¤‘ê°„ |
| **Backend (H)** | íƒ€ì„ë¼ì¸ API | `GET /cases/{id}/timeline` | ğŸŸ¢ ë‚®ìŒ |
| **Backend (H)** | íŠ¸ë¦¬ êµ¬ì¡° ë³€í™˜ | ì¦ê±° â†’ íŠ¸ë¦¬ ë³€í™˜ ë¡œì§ | ğŸŸ¡ ì¤‘ê°„ |
| **Frontend (P)** | ë§ˆì¸ë“œë§µ UI | React Flow ë˜ëŠ” D3.js | ğŸ”´ ë†’ìŒ |
| **Frontend (P)** | ì¸í„°ë™ì…˜ | ì¤Œ, íŒ¬, í´ë¦­ ì´ë²¤íŠ¸ | ğŸŸ¡ ì¤‘ê°„ |

---

### 2.4 ê¸°ìˆ  ìŠ¤íƒ ê²€í† 

| ë¼ì´ë¸ŒëŸ¬ë¦¬ | ì¥ì  | ë‹¨ì  | ì¶”ì²œ |
|------------|------|------|------|
| **React Flow** | React ì¹œí™”ì , ì»¤ìŠ¤í…€ ì‰¬ì›€ | íŠ¸ë¦¬ ë ˆì´ì•„ì›ƒ ì§ì ‘ êµ¬í˜„ | â­ |
| **D3.js** | ìœ ì—°í•¨, íŠ¸ë¦¬ ë ˆì´ì•„ì›ƒ ë‚´ì¥ | ëŸ¬ë‹ ì»¤ë¸Œ | |
| **GoJS** | ê¸°ëŠ¥ í’ë¶€ | ìœ ë£Œ | |
| **vis.js** | ë¬´ë£Œ, ë„¤íŠ¸ì›Œí¬ ê·¸ë˜í”„ | React í†µí•© ë²ˆê±°ë¡œì›€ | |

---

## ğŸ”— Phase 3: ì¸ë¬¼ê´€ê³„ ê·¸ë˜í”„

> **ëª©í‘œ:** ì‚¬ê±´ ê´€ê³„ìë“¤ì„ ë…¸ë“œ-ì—£ì§€ ê·¸ë˜í”„ë¡œ ì‹œê°í™”

### 3.1 ì™„ë£Œ ê¸°ì¤€ (Definition of Done)

- [ ] ì¦ê±°ì—ì„œ ì¸ë¬¼ëª… ìë™ ì¶”ì¶œ (NER)
- [ ] ì¸ë¬¼ ìˆ˜ë™ ì¶”ê°€/ìˆ˜ì • ê°€ëŠ¥
- [ ] ê´€ê³„ ìœ í˜•ë³„ ìƒ‰ìƒ êµ¬ë¶„
- [ ] Force-directed ê·¸ë˜í”„ ë ˆì´ì•„ì›ƒ
- [ ] ë…¸ë“œ í´ë¦­ ì‹œ í•´ë‹¹ ì¸ë¬¼ ê´€ë ¨ ì¦ê±° í•„í„°

---

### 3.2 ë°ì´í„° êµ¬ì¡°

#### 3.2.1 ì¸ë¬¼ ìŠ¤í‚¤ë§ˆ (PostgreSQL)

```sql
-- ì¸ë¬¼ í…Œì´ë¸”
CREATE TABLE case_persons (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    case_id UUID NOT NULL REFERENCES cases(id),
    name VARCHAR(100) NOT NULL,
    alias VARCHAR(100),              -- ë³„ì¹­ (ì¹´í†¡ ë‹‰ë„¤ì„ ë“±)
    role VARCHAR(50) NOT NULL,       -- 'plaintiff', 'defendant', 'child', 'relative', 'friend', 'third_party'
    side VARCHAR(20),                -- 'plaintiff_side', 'defendant_side', 'neutral'
    description TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);

-- ê´€ê³„ í…Œì´ë¸”
CREATE TABLE person_relationships (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    case_id UUID NOT NULL REFERENCES cases(id),
    person_a_id UUID NOT NULL REFERENCES case_persons(id),
    person_b_id UUID NOT NULL REFERENCES case_persons(id),
    relationship_type VARCHAR(50),   -- 'spouse', 'parent', 'child', 'sibling', 'friend', 'colleague', 'affair'
    description TEXT
);
```

#### 3.2.2 ê·¸ë˜í”„ API ì‘ë‹µ

```json
{
  "case_id": "uuid",
  "nodes": [
    {
      "id": "person-1",
      "name": "ê¹€OO",
      "role": "plaintiff",
      "side": "plaintiff_side",
      "color": "#4CAF50"
    },
    {
      "id": "person-2",
      "name": "ì´OO",
      "role": "defendant",
      "side": "defendant_side",
      "color": "#F44336"
    },
    {
      "id": "person-3",
      "name": "ë°•OO",
      "role": "third_party",
      "side": "neutral",
      "color": "#E91E63"
    }
  ],
  "edges": [
    {
      "source": "person-1",
      "target": "person-2",
      "relationship": "spouse",
      "label": "ë°°ìš°ì"
    },
    {
      "source": "person-2",
      "target": "person-3",
      "relationship": "affair",
      "label": "ì™¸ë„ ìƒëŒ€"
    }
  ]
}
```

---

### 3.3 ë‹´ë‹¹ë³„ ì‘ì—…

| ë‹´ë‹¹ | ì‘ì—… | ìƒì„¸ | ë‚œì´ë„ |
|------|------|------|--------|
| **AI Worker (L)** | NER ëª¨ë¸ ì ìš© | í•œêµ­ì–´ ì¸ëª… ì¶”ì¶œ | ğŸŸ¡ ì¤‘ê°„ |
| **AI Worker (L)** | ê´€ê³„ ì¶”ë¡  | ëŒ€í™”ì—ì„œ ê´€ê³„ ì¶”ë¡  | ğŸ”´ ë†’ìŒ |
| **Backend (H)** | ì¸ë¬¼ CRUD API | ì¸ë¬¼/ê´€ê³„ ê´€ë¦¬ | ğŸŸ¡ ì¤‘ê°„ |
| **Backend (H)** | ê·¸ë˜í”„ API | `GET /cases/{id}/relationship-graph` | ğŸŸ¡ ì¤‘ê°„ |
| **Frontend (P)** | ê·¸ë˜í”„ UI | Force-directed graph | ğŸ”´ ë†’ìŒ |
| **Frontend (P)** | ì¸ë¬¼ í¸ì§‘ UI | ì¸ë¬¼ ì¶”ê°€/ìˆ˜ì • í¼ | ğŸŸ¡ ì¤‘ê°„ |

---

## ğŸ“Š ì „ì²´ ì‘ì—… ìš”ì•½

### ë‹´ë‹¹ë³„ ì‘ì—… ëª©ë¡

#### AI Worker (L)

| Phase | ì‘ì—… | íŒŒì¼ | ë‚œì´ë„ |
|-------|------|------|--------|
| 1 | ì˜í–¥ë„ ê·œì¹™ í…Œì´ë¸” | `impact_rules.py` | ğŸŸ¡ |
| 1 | ImpactAnalyzer í´ë˜ìŠ¤ | `impact_analyzer.py` | ğŸ”´ |
| 1 | íŒë¡€ ìœ ì‚¬ë„ ê²€ìƒ‰ | `impact_analyzer.py` | ğŸŸ¡ |
| 2 | ë‚ ì§œ ì¶”ì¶œ ê°•í™” | ê¸°ì¡´ íŒŒì„œ ê°œì„  | ğŸŸ¢ |
| 2 | ì´ë²¤íŠ¸ ìš”ì•½ ìƒì„± | `event_summarizer.py` | ğŸŸ¡ |
| 3 | NER (ì¸ëª… ì¶”ì¶œ) | `person_extractor.py` | ğŸŸ¡ |
| 3 | ê´€ê³„ ì¶”ë¡  | `relationship_inferrer.py` | ğŸ”´ |

#### Backend (H)

| Phase | ì‘ì—… | ì—”ë“œí¬ì¸íŠ¸ | ë‚œì´ë„ |
|-------|------|------------|--------|
| 1 | ì¬ì‚° CRUD | `/cases/{id}/properties` | ğŸŸ¡ |
| 1 | ì˜ˆì¸¡ ì¡°íšŒ | `/cases/{id}/division-prediction` | ğŸŸ¡ |
| 1 | SSE ìŠ¤íŠ¸ë¦¼ | `/cases/{id}/division-prediction/stream` | ğŸŸ¡ |
| 2 | íƒ€ì„ë¼ì¸ API | `/cases/{id}/timeline` | ğŸŸ¢ |
| 3 | ì¸ë¬¼ CRUD | `/cases/{id}/persons` | ğŸŸ¡ |
| 3 | ê·¸ë˜í”„ API | `/cases/{id}/relationship-graph` | ğŸŸ¡ |

#### Frontend (P)

| Phase | ì‘ì—… | ì»´í¬ë„ŒíŠ¸ | ë‚œì´ë„ |
|-------|------|----------|--------|
| 1 | ì¬ì‚° ì…ë ¥ í¼ | `PropertyInputForm` | ğŸŸ¡ |
| 1 | ë¶„í•  ê²Œì´ì§€ | `DivisionGauge` | ğŸŸ¡ |
| 1 | ì˜í–¥ë„ ëª©ë¡ | `EvidenceImpactList` | ğŸŸ¢ |
| 1 | SSE ì—°ë™ | `useDivisionStream` | ğŸŸ¡ |
| 2 | ë§ˆì¸ë“œë§µ UI | `TimelineMindmap` | ğŸ”´ |
| 3 | ê´€ê³„ ê·¸ë˜í”„ UI | `RelationshipGraph` | ğŸ”´ |

---

## ğŸ—“ï¸ ë‹¤ìŒ ë‹¨ê³„

1. **íŒ€ ë¯¸íŒ…**: ë³¸ ë¬¸ì„œ ë¦¬ë·° ë° ì—­í•  í™•ì •
2. **íŒë¡€ ë°ì´í„° ìˆ˜ì§‘**: ì¬ì‚°ë¶„í•  íŒë¡€ í™•ë³´ (ê³µí†µ)
3. **Phase 1 ì°©ìˆ˜**: ê° ë‹´ë‹¹ë³„ ì‘ì—… ì‹œì‘
4. **ì£¼ê°„ ì‹±í¬**: ì§„í–‰ ìƒí™© ê³µìœ 

---

## ğŸ’¬ ë…¼ì˜ í•„ìš” ì‚¬í•­ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1 (ì¬ì‚°ë¶„í• )
- [ ] íŒë¡€ ë°ì´í„° ìˆ˜ì§‘ ë°©ë²•
- [ ] ì˜ˆì¸¡ ì‹ ë¢°ë„ ê¸°ì¤€
- [ ] ë©´ì±… ë¬¸êµ¬ ë²•ë¥  ê²€í† 
- [ ] ì• ë‹ˆë©”ì´ì…˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„ ì •

### Phase 2 (íƒ€ì„ë¼ì¸)
- [ ] ë§ˆì¸ë“œë§µ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„ ì •
- [ ] ë‚ ì§œ ì—†ëŠ” ì¦ê±° ì²˜ë¦¬ ë°©ë²•

### Phase 3 (ì¸ë¬¼ê´€ê³„)
- [ ] NER ëª¨ë¸ ì„ ì • (í•œêµ­ì–´)
- [ ] ìµëª…í™” í•„ìš” ì—¬ë¶€

---

**END OF IDEAS_IMPLEMENTATION_PLAN.md**
