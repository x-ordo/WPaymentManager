# [제안요청서(RFP)] WOW 지급대행 통제·관리 웹 시스템 구축

## 1. 사업 개요

- **사업명:** WOW 지급대행 B2B 내부망(Intranet) 웹 시스템 구축
- **사업 목적:** 
    - 기존 레거시 API(`127.0.0.1:33552`)의 직접 호출로 인한 보안 취약점(GET 파라미터 노출) 원천 차단.
    - 불안정한 통신 환경(5초 쓰로틀링, 세션 만료)을 백엔드에서 중앙 통제하여 프론트엔드 안정성 확보.
    - 지급/출금 업무의 처리 속도를 극대화할 수 있는 고밀도 데이터 그리드 기반의 관리자 환경 구축.

## 2. 시스템 아키텍처 및 기술 스택

오버엔지니어링을 배제하고 단일 프로젝트로 프론트엔드와 BFF(Backend-For-Frontend) 역할을 동시에 수행하는 구조를 채택합니다.

- **Framework:** Next.js 14+ (App Router 기반)
- **Language:** TypeScript
- **State Management & Data Fetching:** React Query (또는 SWR) + Zustand
- **UI/Component:** Tailwind CSS, TanStack Table (Headless Data Grid)
- **Infra:** Windows Server (Native) + PM2 (Node.js 프로세스 관리 및 In-memory 상태 유지)

## 3. 핵심 요구사항 (기능 범위)

### 3.1. 통합 인증 및 대시보드

- **로그인 (`10100`):** 관리자 등급(`_CLASS`)에 따른 권한 및 메뉴 접근 제어.
- **대시보드 요약 (`90000`, `90100`):** 보유 금액(`_MONEY`), 수수료율, 사용 가능일(`_APROVALUE`), 출금 한도 실시간 모니터링 패널 구현.

### 3.2. 입출금 및 통지 내역 모니터링

- **조회 화면 (`21000`, `30000`, `40000`):** 입금 신청, 출금 통지, 입금 통지 내역을 날짜(`sdate`, `edate`) 기준으로 조회.
- **기능:** 클라이언트 사이드 데이터 필터링, 정렬 및 엑셀(CSV) 다운로드 지원.

### 3.3. 출금 통제 및 관리 (핵심 수익/리스크 구간)

- **출금 신청 (`50000`):** 예외 상황(한도 초과, 금액 미달, 30초 쿨타임) 발생 시 즉각적인 프론트엔드 알림(Toast) 제공.
- **출금 리스트 조회 및 검색 (`51000`, `51100`):** 10초 주기의 백그라운드 자동 갱신(Auto-polling) 구현.
- **가맹점 승인/취소 (`51400`, `51600`):** 
    - 리스트 내 인라인(In-line) 버튼 배치로 빠른 액션 지원.
    - Optimistic UI(낙관적 업데이트) 적용으로 대기 시간 없는 화면 전환.

## 4. UI/UX 요구사항 (Minimalist & High-Density)

- **디자인 모티브:** `admin.html`의 레이아웃과 감성을 계승하되, 더 정갈한 무채색 톤으로 정제.
- **컬러 정책:** 
    - 배경: `#FAFAFA` (연회색), 테이블 헤더: `#F0F0F0`.
    - 텍스트: `#1A1A1A` (주요 정보), `#737373` (보조 정보).
    - 포인트 컬러: 기능적 용도(승인/취소) 외에는 가급적 배제. 상태값은 텍스트 굵기와 미세한 톤 차이로 식별.
- **고밀도 리스트:** 여백을 극단적으로 줄인 테이블 구조. 한 화면에 최대한 많은 레코드를 노출하여 스크롤 최소화.
- **단일 화면 중심:** 여러 페이지로 분산하기보다, 좌측 Navbar를 통해 최소한의 메뉴(대시보드/출금관리)만 제공하고 각 페이지 내에서 모든 필터와 액션이 완결되도록 구성.
- **폰트:** Pretendard 또는 시스템 산세리프 폰트 사용. 숫자와 코드는 가독성을 위해 자간을 조절하거나 모노스페이스 서체 활용.

## 5. 비기능 및 예외 처리 요구사항 (Risk Management)

본 시스템의 가장 중요한 파트로, 레거시 API의 불안정성을 Next.js 서버 단에서 완벽히 방어해야 합니다.

| 에러 코드        | 발생 원인                        | 시스템 대응 시나리오 (Next.js Server Side)                                                                                     |
| ---------------- | -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| **Code 401**     | 5초 호출 제한 (Throttling)       | 프론트에 에러를 반환하지 않고, 서버 큐(Queue)에서 5.1초 대기 후 자동 재호출하여 정상 결과값만 프론트로 전달. (최대 3회 재시도) |
| **Code 402**     | Connect 정보 없음 (Session Drop) | 전역 변수에 캐싱된 `connectionid` 무효화. 즉시 로그인 API(`10100`) 백그라운드 호출 후 ID 갱신, 이후 실패한 API 재실행.         |
| **Code 500**     | 레거시 서버 에러                 | 서버 에러 로깅 후, 프론트에는 정제된 알림("지급대행사 서버 응답 지연") 노출.                                                   |
| **Code 3, 8, 9** | 한도 오류, 쿨타임 제한           | 비즈니스 로직 에러이므로 즉시 프론트로 전달하여 사용자가 인지하도록 경고창 팝업.                                               |

## 6. 산출물

1. 프론트/서버 통합 소스코드 원본 (Git Repository)
2. Windows Server (IIS 또는 PM2) 환경 배포 및 운영 가이드
