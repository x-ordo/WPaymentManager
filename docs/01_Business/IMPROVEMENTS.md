# 시스템 개선 제안 사항 (Improvements)

백엔드 DB에 직접 접근하지 않고 API(`API_SPEC.md`)만을 사용하여 시스템을 구축할 때, 서비스의 안정성과 품질을 높이기 위한 개선 사항들을 제안합니다.

---

### 1. API 응답 캐싱 및 최적화
*   **지표 데이터 캐싱 (90000, 90100):** 보유 금액이나 한도 정보는 실시간성이 중요하지만, 매 페이지 전환 시마다 호출하기보다 Next.js의 `unstable_cache`나 전역 상태 관리(Zustand)를 통해 10~30초 단위의 짧은 캐싱을 적용하여 API 서버 부하를 줄일 수 있습니다.
*   **병렬 데이터 패칭:** 대시보드 구성 시 여러 API를 호출해야 한다면 `Promise.all`을 사용하여 병렬로 호출함으로써 사용자 체감 속도를 개선합니다.

### 2. 고도화된 에러 핸들링
*   **회로 차단기(Circuit Breaker) 패턴:** 레거시 API 서버가 500 에러를 지속적으로 반환하거나 응답 시간이 극도로 길어질 경우, 시스템이 자동으로 API 호출을 잠시 중단하고 사용자에게 "점검 중" 안내를 노출하여 시스템 전체의 크래시를 방어합니다.
*   **정교한 재시도 전략:** 401(쓰로틀링) 에러 발생 시 현재는 단순히 5.1초 대기 후 재시도하지만, 지수 백오프(Exponential Backoff) 알고리즘을 적용하여 서버 부하 상황에 유연하게 대응합니다.

### 3. 클라이언트 사이드 UX 개선
*   **낙관적 업데이트 (Optimistic UI):** 출금 승인/취소 시 API 응답이 오기 전이라도 화면상의 상태를 먼저 변경하고, 실패 시에만 롤백하는 방식을 통해 B2B 시스템의 업무 처리 속도를 극대화합니다.
*   **백그라운드 동기화:** 관리자가 리스트 화면에 머물러 있을 때, SWR이나 React Query의 `refetchInterval`을 활용하여 10~20초 주기로 최신 상태를 자동 갱신함으로써 데이터 불일치를 최소화합니다.

### 4. 보안 및 로깅 (BFF 계층)
*   **서버 사이드 로깅:** DB 직접 연결은 없지만, Next.js 서버(BFF) 내부 로그(File Log 등)를 통해 어떤 관리자가 어떤 API를 호출했는지, 응답 시간은 어떠했는지에 대한 '통신 로그'를 남겨 장애 추적성을 확보합니다.
*   **민감 정보 마스킹:** API 응답 결과 중 계좌번호나 전화번호 등의 민감 정보가 포함된 경우, 프론트엔드로 전달하기 전 BFF 계층에서 일부 마스킹(예: 010-****-1234) 처리하여 보안을 강화합니다.
